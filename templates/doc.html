<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: sans-serif;
    margin: 0px;
}
.topo {
    color: #fff;
    background: #3d3d47;
    padding: 10px 90px;
    font-size: 35px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}
.corpo {
    margin: 90px;
}
.h1 {
    font-size: 25px;
    padding: 30px 0px;
}
.nome {
    font-size: 20px;
}

li {
    background: #eee;
    padding: 11px;
    list-style: 'route: ';
    margin: 15px;
}
.rota {
    font-size: 20px;
    font-family: monospace;
    background: #ccc;
    padding: 0px 15px;
}
.req {
    margin: 19px;
    font-family: monospace;
    font-size: 17px;
}
.resp {
    margin: 0px 19px;
    font-size: 17px;
}


</style>
   
<title>Documentation</title>
</head>
<body>
    <div class="topo">
        <div>
            API_SLI v0.1
        </div>
        <div class="nome">
            by:williams_sousa
        </div>
    </div>
    <div class="corpo">
        <span class="h1">Documentação para uso de API</span> <br><br>
        As rotas abaixo mostram as entradas e saída, além de como as requisições devem ser feita usado GET ou POST 
        <br>Caso não seja seguido, o servidor tera como resposta erro da casa de 500.
        <ul>
            <li> <span class="rota">/doc</span> 
                <div class="req">
                    Meth:'GET' <br>
                    out:'html' 
                </div>
                <div class="resp">
                    Fazendo um 'get' a resposta se ver nessa documentação.
                </div>
            </li>


            <li> <span class="rota">/login/$chave</span>
                <div class="req">
                    Meth:'GET' <br>
                    Out:'json'  ->  {'GET':sha256-> $chave , 'singned':sha256-> $chave_assinada}
                </div>
                <div class="resp">
                    Fazendo um 'get', a saída é um json com a chave enviada a API 'GET' e a chave assinada 'singned'. <br>
                    OBS: 'singned'  é a valiadação para liberação das ENDPOINT's cosumidas, deve ser tratada, ela acompanha as requisições para consumo da API. 
                </div>
            </li>


            <li> <span class="rota">/$chave/login</span>
                <div class="req">
                    Meth:'POST'  ( RAW -> json) {'user':str-> $login_do_usuario , 'pwd':str-> $senha}<br>
                    Out:'json'  ->  {'givenname':str , 'mail':str , 'mail2':str , 'memberof':list , 'sAMAccountName':str , 'token':str , 'user':str}
                </div>
                <div class="resp">
                    Rota para login de usuario <br>
                    A saída é os dados do usuario incluindo o tokem de altenticação, a cada login um novo token aleatorio é gerado.<br>
                    O tokem pode ser guardado em Cookie de forma simples e deve ser enviado para API como 'Bearer' (tokem de head)
                </div>
            </li>
            

            <div class="resp"> Após o login do user, as rotas vem conter o login do mesmo. </div>


            <li> <span class="rota">/$chave/$user/logout</span>
                <div class="req">
                    Meth:'GET' <br>
                    Out:'json'  ->  {'logout':str-> 'ok'}
                </div>
                <div class="resp">
                    Rota para deslogar usuario <br>
                    A saída é um ok.
                </div>
            </li>



            <li> <span class="rota">/$chave/$user/users</span>
                <div class="req">
                    Meth:'GET'  ( get -> keys) {'chr':str , 'pag':int ,'qp':int}<br>
                    Out:'json'  ->  {'atual_pg':int , 'total_pg':int , 'users':list*}  
                    <br>-> list* -> [dict*] 
                    <br>-> dict* -> {"cn":str-> nome , 'givenname':str-> login , 'mail':str-> email ,
                                     'memberof':list-> grupos , 'telephonenumber':str-> telefone ,'info':str -> criador , 
                                     login:str , 'estado':bool -> ativado}
                </div>
                <div class="resp">
                    Rota para buscar usuarios <br>
                    Para fazer buscar o usuario deve ser autorizado a essa função. <br>
                    chr -> caractere ou nome a ser buscado (cn). <br>
                    pag -> é a página solicitada. <br>
                    qp -> quantidade de usuarios por de página. <br>
                    A saída inclui o numero da página e a quantidade.<br>
                </div>
            </li>



            <li> <span class="rota">/$chave/$user/adduser</span>
                <div class="req">
                    Meth:'POST'  ( raw -> keys) {'nome':str , 'pwd':str , 'email2':str , 'desc':str}<br>
                    Out:'json'  ->  {'response':bool , 'login':str , 'mensg':str}  
                </div>
                <div class="resp">
                    Rota para criar usuario.<br>
                    'response' : se foi criado. <br>
                    'mensg' : varia de acordo com o ocorrido ['usuario criado' , 'usuario ja existe' , 'login ja existe'], <br>
                    'login' : mostra o login criado para o usuario, <br>
                </div>
            </li>



            <li> <span class="rota">/$chave/$user/delete_user</span>
                <div class="req">
                    Meth:'POST'  ( raw -> keys) {'DN':str}<br>
                    Out:'json'  ->  {'response':bool}  
                </div>
                <div class="resp">
                    Rota para deletar usuario.<br>
                    'response' : para deletado  [true , false , null]. <br>
                </div>
            </li>




            <li> <span class="rota">/$chave/$user/groups</span>
                <div class="req">
                    Meth:'GET'  ( get -> keys) {'chr':str , 'pag':int ,'qp':int , 'membros':int}<br>
                    Out:'json'  ->  {'atual_pg':int , 'total_pg':int , 'groups':list*}  
                    <br>-> list* -> [dict*] 
                    <br>-> doct* -> {"DN":str , "UGP":str , "cn":str , "membros":list** , 'info':str -> criador}
                    <br>-> list** -> [str]
                </div>
                <div class="resp">
                    Rota para buscar grupos.<br>
                    Para fazer buscar o usuario deve ser autorizado a essa função. <br>
                    chr -> caractere ou nome a ser buscado (cn). <br>
                    pag -> é a página solicitada. <br>
                    qp -> quantidade de usuarios por de página. <br>
                    membros -> para listar os usuarios de cada grupo 0 ou 1. <br>
                    A saída inclui o numero da pagina e a quantidade.<br>
                </div>
            </li>




            <li> <span class="rota">/$chave/$user/add_group</span>
                <div class="req">
                    Meth:'POST'  ( raw -> keys) {'nome':str , 'desc':str}<br>
                    Out:'json'  ->  {'response':bool}  
                </div>
                <div class="resp">
                    Rota para adicionar grupos.<br>
                    dec -> para descrição do grupo
                </div>
            </li>



            <li> <span class="rota">/$chave/$user/modify_group</span>
                <div class="req">
                    Meth:'POST'  ( raw -> keys) {'user':str , 'DN_group':str , 'modify': str -> 'add' | 'remove'}<br>
                    Out:'json'  ->  {'response':bool}  
                </div>
                <div class="resp">
                    Rota para adicionar e remover membro de grupos.<br>
                    'add' -> adicionar um usuario. <br>
                    'remove' -> remover usuario.
                </div>
            </li>



            <li> <span class="rota">/$chave/$user/delete_group</span>
                <div class="req">
                    Meth:'POST'  ( raw -> keys) {'DN':str }<br>
                    Out:'json'  ->  {'response':bool}  
                </div>
                <div class="resp">
                    Rota para remover grupo.<br>
                    "DN" -> é a identificação do grupo.
                </div>
            </li>


            <li> <span class="rota">/$chave/$user/reset_pwd</span>
                <div class="req">
                    Meth:'POST'  ( raw -> keys) {'pwd':str , 'new_pwd':str}<br>
                    Out:'json'  ->  {'response':bool , 'mensg':str}  
                </div>
                <div class="resp">
                    Rota para mudar a senha do usuario.<br>
                    "pwd" -> senha atual. <br>
                    "new_pwd" -> nova senha.
                </div>
            </li>

            
            <li> <span class="rota">/$chave/$user/user_pwd</span>
                <div class="req">
                    Meth:'POST'  ( raw -> keys) {'DN':str , 'new_pwd':str}<br>
                    Out:'json'  ->  {'response':bool , 'mensg':str}  
                </div>
                <div class="resp">
                    Rota para mudar a senha de outros usuario.<br>
                    "DN" -> do usuario que se deseja mudar a senha. <br>
                    "new_pwd" -> nova senha.
                </div>
            </li>



        </ul>

    </div>
    
</body>
</html>